---
chain:
-
  name: fetch_service
  ref: core.winrm_ps_cmd
  params:
    cmd: "(Get-Service| Select Name,StartType | Where-Object {$_.StartType -eq 'Disabled'}).Name"
    host: "10.194.75.42"
    username: "arnab@automationhub.com"
    password: "Pass,123"
  publish:
    exec_out: "{{fetch_service.stdout}}"
  on-success: "winRM_command"
  on-failure: "task2"
-
  name: winRM_command
  ref: "core.winrm_ps_cmd"
  description: Test winRM execution function 
  params:
    host: "10.194.75.42"
    cmd: "echo {{exec_out}}"
    username: "arnab@automationhub.com"
    password: "Pass,123"
  on-success: "task1"
  on-failure: "task2"
-
  name: task1
  ref: core.local
  params:
    cmd: "echo {{exec_out}} : Success" 
-
  name: task2
  ref: core.local
  params:
    cmd: "echo {{ date }} :Failure"
